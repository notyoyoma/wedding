<h1>Coming:</h1>

<table>
  <thead>
    <tr>
      <th>Person</th>
      <th>Email</th>
      <th>Plusses</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <% num = 0 %>
  <tbody>
    <% @coming.each do |response| %>
      <%
        num += 1
        begin
          plusses_arr = JSON.parse(response.plusses)
          num += plusses_arr.count
          plusses = plusses_arr.join(', ')
        rescue
          plusses_arr = response.plusses
          num += 1
          plusses = plusses_arr
        end
      %>
      <tr>
        <td><%= response.person %></td>
        <td><%= response.email %></td>
        <td>
          <%= plusses %>
        </td>
        <td><%= link_to 'Show', response %></td>
        <td><%= link_to 'Edit', edit_response_path(response) %></td>
        <td><%= link_to 'Destroy', response, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
  <tfoot>
    <th>
      Total: <%= num %>
    </th>
  </tfoot>
</table>

<h1>Not Coming:</h1>

<table>
  <thead>
    <tr>
      <th>Person</th>
      <th>Email</th>
      <th>Plusses</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <% num = 0 %>
  <tbody>
    <% @notComing.each do |response| %>
      <%
        num += 1
        begin
          plusses_arr = JSON.parse(response.plusses)
          num += plusses_arr.count
          plusses = plusses_arr.join(', ')
        rescue
          plusses_arr = response.plusses
          num += 1
          plusses = plusses_arr
        end
      %>
      <tr>
        <td><%= response.person %></td>
        <td><%= response.email %></td>
        <td><%= plusses %></td>
        <td><%= link_to 'Show', response %></td>
        <td><%= link_to 'Edit', edit_response_path(response) %></td>
        <td><%= link_to 'Destroy', response, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
  <tfoot>
    <th>
      Total: <%= num %>
    </th>
  </tfoot>
</table>
<br>

<%= link_to 'New Response', new_response_path %>
